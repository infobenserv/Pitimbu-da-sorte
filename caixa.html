<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Caixa</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f5f5f5;
      max-width: 700px;
      margin: auto;
    }
    nav {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
      justify-content: center;
    }
    nav button {
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      background-color: #ddd;
      cursor: pointer;
    }
    nav button:hover {
      background-color: #ccc;
    }
    nav .ativo {
      background-color: #4caf50;
      color: white;
    }
    .bloco {
      background: white;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 6px;
      box-shadow: 0 0 4px rgba(0,0,0,0.1);
    }
    h2, h3 {
      text-align: center;
    }
    .linha {
      border-top: 1px solid #ccc;
      margin: 20px 0;
    }
    .btnZerar {
      background-color: red;
      color: white;
      border: none;
      padding: 10px;
      width: 100%;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <!-- Navegação -->
  <nav>
    <a href="home.html"><button>Home</button></a>
    <a href="cadastro_vendedor.html"><button>Adicionar Vendedor</button></a>
    <a href="vendedores.html"><button>Vendedores</button></a>
    <a href="produtos_por_vendedor.html"><button>Produtos</button></a>
    <a href="caixa.html"><button class="ativo">Caixa</button></a>
  </nav>

  <h2>Resumo do Caixa</h2>

  <div class="bloco">
    <strong>Receita Total (Vendas):</strong><br>
    R$ <span id="totalVendas">0,00</span>
  </div>

  <div class="bloco">
    <strong>Total de Despesas:</strong><br>
    R$ <span id="totalDespesas">0,00</span>
  </div>

  <div class="bloco">
    <strong>Saldo Final (Vendas - Despesas):</strong><br>
    R$ <span id="saldoFinal">0,00</span>
  </div>

  <div class="linha"></div>

  <h3>Divisão de Lucros</h3>
  <div class="bloco">
    BENEDITO (25%): R$ <span id="benedito">0,00</span><br>
    JOSÉ ROBERTO (25%): R$ <span id="jose">0,00</span><br>
    PEDRO (50%): R$ <span id="pedro">0,00</span>
  </div>

  <button class="btnZerar" onclick="zerarCaixa()">Zerar Tudo</button>

<script>
  function formatar(valor) {
    return valor.toFixed(2).replace(".", ",");
  }

  function atualizarCaixa() {
    const produtos = JSON.parse(localStorage.getItem("produtos")) || [];
    const despesas = JSON.parse(localStorage.getItem("despesas")) || [];

    let totalVendas = produtos.reduce((soma, p) => soma + (p.valorApurado || 0), 0);
    let totalDespesas = despesas.reduce((soma, d) => soma + (d.valor || 0), 0);
    let saldo = totalVendas - totalDespesas;

    document.getElementById("totalVendas").textContent = formatar(totalVendas);
    document.getElementById("totalDespesas").textContent = formatar(totalDespesas);
    document.getElementById("saldoFinal").textContent = formatar(saldo);

    // Divisão
    document.getElementById("benedito").textContent = formatar(saldo * 0.25);
    document.getElementById("jose").textContent = formatar(saldo * 0.25);
    document.getElementById("pedro").textContent = formatar(saldo * 0.5);
  }

  function zerarCaixa() {
    if (confirm("Tem certeza que deseja zerar todas as vendas e despesas?")) {
      localStorage.removeItem("produtos");
      localStorage.removeItem("despesas");
      atualizarCaixa();
    }
  }

  window.onload = atualizarCaixa;
</script>

</body>
</html>